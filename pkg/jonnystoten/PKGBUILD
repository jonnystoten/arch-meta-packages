pkgbase=jonnystoten
pkgname=(jonnystoten-base jonnystoten-devel jonnystoten-x jonnystoten-grayson)
pkgver=2019.05.27
pkgrel=2
pkgdesc="Base system configuration for jonnystoten systems"
arch=(any)
license=(MIT)

source=('sudoers.wheel')
md5sums=(SKIP)

package_jonnystoten-base() {
  provides=(vi)
  conflicts=(vi)
  depends=(bash bzip2 coreutils cryptsetup device-mapper dhcpcd diffutils
      e2fsprogs file filesystem findutils gawk gcc-libs gettext glibc grep gzip
      inetutils iproute2 iputils jfsutils less licenses linux logrotate lvm2 man-db
      man-pages mdadm netctl pacman pciutils perl procps-ng psmisc reiserfsprogs
      s-nail sed shadow sysfsutils systemd-sysvcompat tar texinfo usbutils
      util-linux which xfsprogs)
  # removed from base: nano, vi

  depends+=(sudo unzip dialog htop wpa_supplicant openssh)

  install -Dm 0640 sudoers.wheel "$pkgdir/etc/sudoers.d/wheel"

  depends+=(fish stow vim)
  
  install -dm 0755 "${pkgdir}/usr/bin"
  ln -s /usr/bin/vim "${pkgdir}/usr/bin/vi"
}

package_jonnystoten-devel() {
  depends=(jonnystoten-base)

  # Base Group
  depends+=(autoconf automake binutils bison fakeroot file findutils flex
      gawk gcc gettext grep groff gzip libtool m4 make pacman patch pkg-config
      s3cmd sed sudo systemd texinfo util-linux which)

  depends+=(git diff-so-fancy)
}

package_jonnystoten-x() {
  depends=(jonnystoten-base)

  depends+=(xorg-server i3-wm polybar firefox kitty)
}

package_jonnystoten-grayson() {
  depends=(jonnystoten-x)
  
  depends+=(nvidia nvidia-utils ntfs-3g)
}
